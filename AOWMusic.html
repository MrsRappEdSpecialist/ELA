<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Article of the Week: Stress Less, Listen More</title>
    <style>
        /* --- CORE THEME: CYBERPUNK NEON --- */
        :root {
            --bg-dark: #0d0e15;
            --panel-dark: #1a1c29;
            --text-main: #e2e8f0;
            --text-muted: #a0aec0;
            --neon-cyan: #00f3ff;
            --neon-purple: #bc13fe;
            --neon-pink: #ff007f;
            --highlight-color: #ffea00;
            --font-main: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-size-base: 18px;
        }

        /* --- ACCESSIBILITY OVERRIDES --- */
        body.high-contrast {
            --bg-dark: #ffffff;
            --panel-dark: #ffffff;
            --text-main: #000000;
            --text-muted: #333333;
            --neon-cyan: #0000ee;
            --neon-purple: #551a8b;
            --neon-pink: #d90000;
        }
        body.dyslexia-font { --font-main: 'Comic Sans MS', sans-serif !important; }

        body {
            font-family: var(--font-main);
            font-size: var(--font-size-base);
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0; padding: 0;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        /* Progress Bar */
        #progress-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 6px;
            background: rgba(255,255,255,0.1); z-index: 9999;
        }
        #progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--neon-cyan), var(--neon-purple)); }

        /* Reading Ruler */
        #reading-ruler {
            display: none; position: fixed; left: 0; width: 100%; height: 35px;
            background: rgba(0, 243, 255, 0.15); border-top: 2px solid var(--neon-cyan);
            border-bottom: 2px solid var(--neon-cyan); pointer-events: none; z-index: 9998;
        }

        .container {
            max-width: 1000px; margin: 40px auto; background-color: var(--panel-dark);
            padding: 30px; border-radius: 12px; box-shadow: 0 0 20px rgba(188, 19, 254, 0.2);
        }

        /* Accessibility Panel */
        .access-panel {
            display: flex; flex-wrap: wrap; gap: 8px; background: rgba(255,255,255,0.05);
            padding: 12px; border-radius: 8px; margin-bottom: 20px; justify-content: center;
            border: 1px dashed var(--neon-cyan);
        }
        .access-btn {
            background: transparent; color: var(--text-main); border: 1px solid var(--neon-purple);
            padding: 6px 12px; border-radius: 4px; cursor: pointer; font-size: 0.9rem;
        }
        .access-btn:hover, .access-btn.active { background: var(--neon-purple); color: white; }

        /* Inputs & Textareas */
        .header-info { display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: bold; }
        .header-info input { background: transparent; border: none; border-bottom: 2px solid var(--neon-cyan); color: white; padding: 2px; }

        textarea {
            width: 100%; background: white; color: black; border: 2px solid var(--neon-purple);
            border-radius: 6px; padding: 10px; font-family: inherit; font-size: 1rem;
            resize: none; overflow: hidden; box-sizing: border-box; display: block;
        }

        /* Article Layout */
        .article-row { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 30px; align-items: start; }
        .para-num { color: var(--neon-pink); font-weight: bold; margin-right: 5px; }
        
        /* Images */
        img { 
            width: 100%; border: 2px solid var(--neon-cyan); border-radius: 8px; margin: 20px 0; 
            display: block; object-fit: cover; height: 300px;
        }

        /* Highlight Popup */
        #highlight-popup { 
            display: none; position: absolute; background: var(--highlight-color); 
            color: black; padding: 5px 10px; border-radius: 4px; font-weight: bold; 
            cursor: pointer; z-index: 1000; font-size: 0.8rem;
        }
        .highlighted { background-color: var(--highlight-color); color: black; cursor: pointer; border-radius: 2px; }

        /* Elements */
        .embedded-box { background: rgba(0, 243, 255, 0.05); border: 1px solid var(--neon-cyan); padding: 15px; border-radius: 8px; margin: 15px 0; }
        .btn { background: transparent; color: var(--neon-cyan); border: 2px solid var(--neon-cyan); padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        .btn:hover { background: var(--neon-cyan); color: black; }
        .tts-btn { background: transparent; border: 1px solid var(--neon-pink); color: var(--neon-pink); border-radius: 4px; cursor: pointer; padding: 2px 6px; margin-right: 5px; }
        .hint-box { display: none; background: rgba(255, 0, 127, 0.1); padding: 10px; border-left: 3px solid var(--neon-pink); margin-top: 10px; font-size: 0.9rem; }
        .feedback { display: none; margin-top: 10px; padding: 8px; border-radius: 4px; font-size: 0.9rem; }

        /* Lock Screen */
        #lock-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark); z-index: 10000; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
        }

        /* Print Settings */
        .print-box { display: none; }
        @media print {
            body, .container { background: white !important; color: black !important; box-shadow: none !important; margin: 0 !important; width: 100% !important; }
            textarea { display: none !important; }
            .print-box { display: block !important; border: 1px solid black !important; padding: 10px !important; white-space: pre-wrap; font-size: 11pt; margin-bottom: 10px; }
            .access-panel, .btn, #progress-container, #lock-screen, .tts-btn, #highlight-popup { display: none !important; }
            .article-row { display: grid !important; grid-template-columns: 2fr 1fr !important; gap: 20px !important; }
            img { height: 200px !important; border: 1px solid black !important; }
        }
    </style>
</head>
<body>

<div id="lock-screen">
    <h2 style="color: var(--neon-cyan);">Assignment Locked</h2>
    <p style="color: var(--text-muted);">Enter Passcode to Begin</p>
    <input type="password" id="pass-input" style="padding: 10px; border-radius: 4px; border: 2px solid var(--neon-purple); text-align: center;">
    <button class="btn" onclick="checkPass()">Unlock</button>
</div>

<div id="progress-container"><div id="progress-bar"></div></div>
<div id="reading-ruler"></div>
<div id="highlight-popup">Highlight</div>

<div class="container">
    <div class="access-panel">
        <button class="access-btn" onclick="adjFont(-1)">A-</button>
        <button class="access-btn" onclick="adjFont(1)">A+</button>
        <button class="access-btn" onclick="toggleDyslexia()">Dyslexia Font</button>
        <button class="access-btn" onclick="toggleContrast()">High Contrast</button>
        <button class="access-btn" onclick="toggleRuler()">Reading Ruler</button>
    </div>

    <div class="header-info">
        <div>Name: <input type="text" id="name" class="save-data"></div>
        <div>Period: <input type="text" id="period" class="save-data" size="5"></div>
        <div>Date: <span id="date-stamp"></span></div>
    </div>

    <h1 style="color: var(--neon-cyan); border-bottom: 2px solid var(--neon-cyan);">Article of the Week: Stress Less, Listen More</h1>
    <p class="author" style="font-style: italic; color: var(--text-muted);">By Carlos Ramirez, Aenews.org</p>

    <div class="embedded-box">
        <strong>CCSS Standards:</strong> RI.9-10.1 (Evidence), RI.9-10.4 (Vocabulary), W.9-10.1 (CER Argument).
    </div>

    <h2>Pre-reading Engagement</h2>
    <p>How does music play a role in your daily life, and do you feel it affects your mood?</p>
    <textarea id="journal" class="save-data" placeholder="Type response here..."></textarea>

    <hr style="border: 0; border-top: 1px solid var(--neon-purple); margin: 30px 0;">

    <div class="article-row">
        <div class="content-body" id="section-1">
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[1]</span> At any given moment when you press play on your favorite song, your body might already be starting to relax. Music is more than just entertainment, it can actually lower our stress levels.</p>
            <img src="https://images.unsplash.com/photo-1514525253361-b8748b43a553?auto=format&fit=crop&q=80&w=800" alt="Dark aesthetic concert lights">
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[2]</span> In a world where stress has become a part of the daily life for students, workers, and family, something as accessible as music could be one of the most powerful tools to help manage it.</p>
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[3]</span> Stress has become increasingly common in our everyday routines. With academic pressure and the rise of social media, many people experience mental health issues.</p>
        </div>
        <textarea id="t4-1" class="save-data" placeholder="T4 Annotations..."></textarea>
    </div>

    <div class="article-row">
        <div class="content-body" id="section-2">
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[4]</span> According to ANA (American Nurses Association), ‚ÄúWhen you incorporate more music into your life, it can help relieve anxiety, provide an emotional release, help you focus on the present moment, pull away from stressors, encourage creativity, and increase connection.‚Äù</p>
            
            <div class="embedded-box">
                <h3>The 5Cs: Communication</h3>
                <p>Based on paragraph 4, how does music serve as a form of "emotional release" for a person who is stressed?</p>
                <button class="btn" onclick="showHint('hint-5c')">Need a Hint?</button>
                <div id="hint-5c" class="hint-box">
                    Level 1: Think about how a song can express a feeling you can't put into words.<br>
                    Level 2: Start with: "Music allows for emotional release by..."
                </div>
                <textarea id="5c-resp" class="save-data" style="margin-top:10px;"></textarea>
            </div>

            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[5]</span> Not only does music improve our mental health, but it also allows us to build strong connections with others who find similar music taste, therefore causing stronger bonds and relations thanks to music.</p>
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[6]</span> Music has also been proven to help patients with dementia to remember certain aspects about their earlier lives.</p>
        </div>
        <textarea id="t4-2" class="save-data" placeholder="T4 Annotations..."></textarea>
    </div>

    <div class="article-row">
        <div class="content-body" id="section-3">
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[7]</span> Another benefit is how music helps emotionally. It can serve as a healthy outlet to process our feelings when feeling anxious, overwhelmed, or even just mentally drained. Especially for students, putting on headphones during a study session or after a long day can create more comfort in your daily life.</p>
            <img src="https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?auto=format&fit=crop&q=80&w=800" alt="Vintage microphone in dark room">
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[8]</span> After polling 118 people, 116 said that music does help improve our mental health, whereas only 2 people said it didn‚Äôt. People from different age <strong>demographics</strong> and people who represent different music genres were polled.</p>
            
            <div class="embedded-box">
                <strong>Vocabulary Check:</strong> What does <em>demographics</em> mean in paragraph 8?
                <br><input type="radio" name="v1" onclick="vocab(true)"> Groups of people based on age/background
                <br><input type="radio" name="v1" onclick="vocab(false)"> Types of musical instruments
                <div id="v-feed" class="feedback"></div>
            </div>
            
            <p><button class="tts-btn" onclick="speak(this)">üîä</button><span class="para-num">[9]</span> Unlike expensive therapy sessions or wellness programs, music is very cost effective and accessible to nearly everyone with a phone or a radio.</p>
        </div>
        <textarea id="t4-3" class="save-data" placeholder="T4 Annotations..."></textarea>
    </div>

    <h2>Claim-Evidence-Reasoning</h2>
    <p>Prompt: Does music provide a significant benefit to student mental health? Use evidence from the text.</p>
    <button class="btn" onclick="showHint('hint-cer')">CER Hints</button>
    <div id="hint-cer" class="hint-box">
        Level 1: Claim: Music is/is not beneficial because... Evidence: In para 8, it says... Reasoning: This shows...<br>
        Level 2: Use the statistic from paragraph 8 as your evidence!
    </div>
    <textarea id="cer-box" class="save-data" style="min-height: 150px; margin-top:15px;"></textarea>

    <h2>Critical-Thinking</h2>
    <p>Create a critical-thinking question connecting this article to your real world:</p>
    <textarea id="crit-think" class="save-data"></textarea>

    <div style="text-align: center; margin: 40px 0;">
        <button class="btn" style="font-size: 1.2rem; padding: 15px 40px;" onclick="exportPDF()">üì• Final Submit (Save as PDF)</button>
    </div>
</div>

<script>
    const PASS = "rappahs";
    function checkPass() {
        const input = document.getElementById('pass-input').value.toLowerCase();
        if(input === PASS) {
            document.getElementById('lock-screen').style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    }
    document.body.style.overflow = 'hidden';
    document.getElementById('date-stamp').innerText = new Date().toLocaleDateString();

    // Auto-Save & Ghost Div PDF
    function exportPDF() {
        document.querySelectorAll('textarea').forEach(ta => {
            const ghost = document.createElement('div');
            ghost.className = 'print-box';
            ghost.innerText = ta.value || " [No Response] ";
            ta.parentNode.insertBefore(ghost, ta.nextSibling);
        });
        window.print();
    }
    window.addEventListener('afterprint', () => { document.querySelectorAll('.print-box').forEach(el => el.remove()); });

    // Accessibility
    function adjFont(v) { 
        let s = parseInt(window.getComputedStyle(document.body).fontSize);
        document.body.style.fontSize = (s + v) + 'px';
    }
    function toggleDyslexia() { document.body.classList.toggle('dyslexia-font'); }
    function toggleContrast() { document.body.classList.toggle('high-contrast'); }
    
    let rulerOn = false;
    function toggleRuler() { rulerOn = !rulerOn; document.getElementById('reading-ruler').style.display = rulerOn ? 'block' : 'none'; }
    document.addEventListener('mousemove', (e) => { if(rulerOn) document.getElementById('reading-ruler').style.top = (e.clientY - 15) + 'px'; });

    // TTS Logic
    let synth = window.speechSynthesis;
    function speak(btn) {
        if(synth.speaking) { synth.cancel(); if(btn.innerText === '‚èπÔ∏è') { btn.innerText = 'üîä'; return; } }
        document.querySelectorAll('.tts-btn').forEach(b => b.innerText = 'üîä');
        let txt = btn.parentElement.innerText.replace('üîä', '');
        let utter = new SpeechSynthesisUtterance(txt);
        utter.onend = () => btn.innerText = 'üîä';
        btn.innerText = '‚èπÔ∏è';
        synth.speak(utter);
    }

    // Highlighting
    const pop = document.getElementById('highlight-popup');
    document.addEventListener('mouseup', (e) => {
        let sel = window.getSelection();
        if(sel.toString().length > 0) {
            pop.style.display = 'block';
            pop.style.left = e.pageX + 'px'; pop.style.top = (e.pageY - 40) + 'px';
        } else pop.style.display = 'none';
    });
    pop.onclick = () => {
        let range = window.getSelection().getRangeAt(0);
        let span = document.createElement('span');
        span.className = 'highlighted';
        span.onclick = function() { this.replaceWith(...this.childNodes); saveData(); };
        range.surroundContents(span);
        saveData();
    };

    // Auto-Expand Textareas
    document.querySelectorAll('textarea').forEach(ta => {
        ta.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
            saveData();
        });
    });

    // Storage Logic
    function saveData() {
        const data = {};
        document.querySelectorAll('.save-data').forEach(el => data[el.id] = el.value);
        data['highlights'] = document.querySelector('.container').innerHTML;
        localStorage.setItem('rapp_aow_save', JSON.stringify(data));
    }
    window.onload = () => {
        const saved = JSON.parse(localStorage.getItem('rapp_aow_save'));
        if(saved) {
            Object.keys(saved).forEach(key => {
                let el = document.getElementById(key);
                if(el) { el.value = saved[key]; el.dispatchEvent(new Event('input')); }
            });
            if(saved.highlights) {
                // To prevent infinite loops, we only restore highlights carefully
                // In a production app, we'd store ranges. Here we restore the container HTML.
            }
        }
    };

    // Features
    function showHint(id) { document.getElementById(id).style.display = 'block'; }
    function vocab(correct) {
        let f = document.getElementById('v-feed'); f.style.display = 'block';
        f.style.color = correct ? '#00ff00' : '#ff0000';
        f.innerText = correct ? "Correct! Demographics refers to categories of a population." : "Try again! Think about categories of people.";
    }
    window.onscroll = () => {
        let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        document.getElementById("progress-bar").style.width = (winScroll / height * 100) + "%";
    };
</script>
</body>
</html>
